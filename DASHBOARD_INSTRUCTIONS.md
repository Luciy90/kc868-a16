# Инструкция по использованию ESPHome Dashboard

## Запуск Dashboard

Dashboard уже запущен! Откройте в браузере:
**http://localhost:6052**

Если браузер не открылся автоматически, скопируйте адрес выше в адресную строку.

## Работа с прошивкой через Dashboard

### 1. Добавление устройства

1. В Dashboard нажмите кнопку **"+"** или **"NEW DEVICE"**
2. Выберите **"Continue"** (продолжить)
3. Введите имя устройства: `kc868-a16-a`
4. Выберите платформу: **ESP32**
5. Выберите тип платы: **ESP32 Dev Module**
6. Нажмите **"NEXT"** и затем **"SKIP"** (мы уже имеем готовый YAML файл)

### 2. Импорт существующей конфигурации

Если устройство уже есть в списке:
1. Найдите `kc868-a16-a` в списке устройств
2. Нажмите на него для редактирования
3. Убедитесь, что выбран правильный файл `kc868-a16-a.yaml`

### 3. Компиляция прошивки

1. В карточке устройства нажмите кнопку **"COMPILE"** (Компилировать)
2. Дождитесь завершения компиляции (может занять 5-10 минут при первом запуске)
3. При успешной компиляции появится сообщение "Compilation successful"

### 4. Прошивка устройства

#### Первая прошивка (через USB):

1. Подключите плату KC868-A16 к компьютеру через USB кабель
2. В Dashboard нажмите кнопку **"INSTALL"** (Установить)
3. Выберите способ прошивки: **"Plug into the computer running ESPHome Dashboard"**
4. Выберите COM порт вашей платы (например, COM3, COM4)
5. Нажмите **"INSTALL"** и дождитесь завершения прошивки

#### Последующие обновления (через OTA):

После первой прошивки можно обновлять прошивку "по воздуху":
1. Убедитесь, что плата подключена к сети Ethernet
2. В Dashboard нажмите **"INSTALL"**
3. Выберите **"Wirelessly (OTA)"**
4. Введите IP адрес устройства (192.168.0.99) или выберите из списка
5. Введите OTA пароль из `secrets.yaml`
6. Нажмите **"INSTALL"**

### 5. Просмотр логов

1. После прошивки нажмите кнопку **"LOGS"** (Логи)
2. Вы увидите реальное время работы устройства
3. Проверьте, что все компоненты инициализированы правильно:
   - Ethernet подключение
   - I2C шина и найденные устройства (PCF8574)
   - Все реле и входы

### 6. Веб-интерфейс устройства

После успешной прошивки откройте в браузере:
**http://192.168.0.99**

Здесь вы сможете:
- Видеть состояние всех реле и входов
- Управлять реле вручную
- Просматривать логи
- Настраивать устройство

## Устранение проблем

### Устройство не появляется в сети

1. Проверьте подключение Ethernet кабеля
2. Проверьте настройки IP в конфигурации
3. Посмотрите логи через Serial порт

### Ошибки компиляции

1. Убедитесь, что файл `secrets.yaml` существует и заполнен
2. Проверьте синтаксис YAML файла
3. Посмотрите подробные логи ошибок в Dashboard

### Проблемы с I2C

1. После прошивки проверьте логи - должны быть видны найденные I2C устройства
2. Если адреса не совпадают, обновите их в `kc868-a16-a.yaml`

## Остановка Dashboard

Для остановки Dashboard нажмите `Ctrl+C` в терминале или закройте окно терминала.

Для повторного запуска:
```bash
esphome dashboard . --open-ui
```



